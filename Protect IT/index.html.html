<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShieldScan: The Small Business Protection Assessment</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0c0c0e;
            --bg-card: #181820;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a0a0;
            --accent-gold: #d4af37;
            --accent-gold-glow: rgba(212, 175, 55, 0.15);
            --dark-1: #141418;
            --dark-2: #1e1e24;
            --dark-3: #292933;
            --strong-color: #2c6e49;
            --leaking-color: #be6a15;
            --missing-color: #9e2a2b;
            --uncharted-color: #5e548e;
            --card-width: 320px;
            --card-height: 450px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(30, 30, 40, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(30, 30, 40, 0.2) 0%, transparent 50%);
        }
        
        h1, h2, h3 {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        h1 {
            text-align: center;
            padding-bottom: 16px;
            margin-bottom: 30px;
            color: var(--accent-gold);
            text-shadow: 0 0 15px var(--accent-gold-glow);
            position: relative;
        }
        
        .subtitle {
            text-align: center;
            font-size: 18px;
            color: var(--accent-gold);
            margin-bottom: 15px;
            position: relative;
            padding-bottom: 20px;
        }
        
        .subtitle::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
        }
        
        .container {
            background: var(--dark-1);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            margin-bottom: 30px;
            border: 1px solid var(--dark-3);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-gold-glow), transparent);
            opacity: 0.4;
        }
        
        .btn {
            background-color: var(--dark-2);
            color: var(--text-primary);
            border: 1px solid var(--accent-gold);
            padding: 14px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .btn:hover {
            background-color: var(--dark-3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.1);
        }
        
        .btn:hover::after {
            opacity: 1;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-subtext {
            font-size: 12px;
            margin-top: 4px;
            color: var(--text-secondary);
            font-weight: 300;
        }
        
        /* Watch Card Styling */
        .watch-card {
            position: relative;
            width: var(--card-width);
            height: var(--card-height);
            margin: 0 auto 35px;
            perspective: 1200px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 18px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7),
                        0 0 10px var(--accent-gold-glow);
            background: var(--bg-card);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--dark-3);
            transition: transform 0.3s ease;
        }
        
        .watch-card:hover .card-inner {
            transform: translateY(-5px);
        }
        
        .card-header {
            background: var(--dark-2);
            color: var(--text-primary);
            padding: 18px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            border-bottom: 1px solid var(--accent-gold);
            position: relative;
        }
        
        .card-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-gold-glow), transparent);
        }
        
        .card-header .icon {
            font-size: 32px;
            margin-right: 16px;
            margin-left: 16px;
        }
        
        .card-header .title {
            font-size: 22px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .card-content {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .card-question {
            font-size: 18px;
            margin-bottom: 24px;
            color: var(--text-primary);
            line-height: 1.5;
        }
        
        .card-importance {
            font-size: 15px;
            background-color: var(--dark-2);
            padding: 18px;
            border-radius: 10px;
            margin-top: auto;
            color: var(--text-secondary);
            border-left: 3px solid var(--accent-gold);
            line-height: 1.6;
        }
        
        .card-corner {
            position: absolute;
            top: 18px;
            right: 18px;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 6px;
            background-color: rgba(30, 30, 38, 0.7);
            padding: 6px 10px;
            border-radius: 8px;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .card-suite {
            font-size: 22px;
            color: var(--accent-gold);
            text-shadow: 0 0 8px var(--accent-gold-glow);
        }
        
        .card-number {
            font-size: 22px;
            font-weight: 600;
            color: var(--accent-gold);
            text-shadow: 0 0 8px var(--accent-gold-glow);
        }
        
        .btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
            width: 100%;
            max-width: var(--card-width);
            margin-left: auto;
            margin-right: auto;
        }
        
        .btn-strong {
            background-color: rgba(44, 110, 73, 0.15);
            border-color: var(--strong-color);
            color: var(--text-primary);
        }
        
        .btn-leaking {
            background-color: rgba(190, 106, 21, 0.15);
            border-color: var(--leaking-color);
            color: var(--text-primary);
        }
        
        .btn-missing {
            background-color: rgba(158, 42, 43, 0.15);
            border-color: var(--missing-color);
            color: var(--text-primary);
        }
        
        .btn-uncharted {
            background-color: rgba(94, 84, 142, 0.15);
            border-color: var(--uncharted-color);
            color: var(--text-primary);
        }
        
        .btn-strong:hover {
            background-color: rgba(44, 110, 73, 0.3);
            box-shadow: 0 0 15px rgba(44, 110, 73, 0.3);
        }
        
        .btn-leaking:hover {
            background-color: rgba(190, 106, 21, 0.3);
            box-shadow: 0 0 15px rgba(190, 106, 21, 0.3);
        }
        
        .btn-missing:hover {
            background-color: rgba(158, 42, 43, 0.3);
            box-shadow: 0 0 15px rgba(158, 42, 43, 0.3);
        }
        
        .btn-uncharted:hover {
            background-color: rgba(94, 84, 142, 0.3);
            box-shadow: 0 0 15px rgba(94, 84, 142, 0.3);
        }
        
        .progress {
            height: 8px;
            background-color: var(--dark-2);
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
            position: relative;
        }
        
        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -100% 0; }
            100% { background-position: 100% 0; }
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #f2d475);
            width: 0%;
            transition: width 0.5s;
            box-shadow: 0 0 10px var(--accent-gold-glow);
        }
        
        .form-group {
            margin-bottom: 24px;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--dark-3);
            border-radius: 8px;
            background-color: var(--dark-2);
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 10px var(--accent-gold-glow);
        }
        
        .hidden {
            display: none;
        }
        
        .result-section {
            margin-bottom: 35px;
        }
        
        .result-section h3 {
            border-bottom: 1px solid var(--dark-3);
            padding-bottom: 10px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .result-section h3::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 60px;
            height: 2px;
            background-color: var(--accent-gold);
        }
        
        .result-card {
            background-color: var(--dark-2);
            padding: 24px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 3px solid var(--accent-gold);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-3px);
        }
        
        .guardian-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .guardian-icon {
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background-color: var(--dark-3);
            border-radius: 50%;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .guardian-info h4 {
            margin: 0;
            color: var(--text-primary);
            font-size: 20px;
        }
        
        .guardian-price {
            color: var(--accent-gold);
            font-size: 15px;
            font-weight: 500;
        }
        
        .guardian-issues {
            margin-top: 16px;
        }
        
        .issue-tag {
            display: inline-block;
            background-color: var(--dark-3);
            padding: 6px 14px;
            border-radius: 20px;
            margin-right: 10px;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-secondary);
            border: 1px solid var(--accent-gold);
            transition: all 0.3s;
        }
        
        .issue-tag:hover {
            background-color: rgba(212, 175, 55, 0.15);
            color: var(--text-primary);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .status-box {
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--dark-3);
            transition: transform 0.3s;
        }
        
        .status-box:hover {
            transform: translateY(-3px);
        }
        
        .status-box h4 {
            margin-top: 0;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .status-box-strong {
            background-color: rgba(44, 110, 73, 0.15);
            border-left: 3px solid var(--strong-color);
        }
        
        .status-box-leaking {
            background-color: rgba(190, 106, 21, 0.15);
            border-left: 3px solid var(--leaking-color);
        }
        
        .status-box-missing {
            background-color: rgba(158, 42, 43, 0.15);
            border-left: 3px solid var(--missing-color);
        }
        
        .status-box-uncharted {
            background-color: rgba(94, 84, 142, 0.15);
            border-left: 3px solid var(--uncharted-color);
        }
        
        .status-count {
            font-size: 32px;
            font-weight: 700;
            margin: 12px 0;
        }
        
        .status-label {
            margin-bottom: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .status-category-strong {
            color: var(--strong-color);
        }
        
        .status-category-leaking {
            color: var(--leaking-color);
        }
        
        .status-category-missing {
            color: var(--missing-color);
        }
        
        .status-category-uncharted {
            color: var(--uncharted-color);
        }
        
        .category-box {
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 15px;
            background-color: var(--dark-2);
            transition: transform 0.3s;
        }
        
        .category-box:hover {
            transform: translateY(-3px);
        }
        
        .question-counter-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--dark-3);
            padding-bottom: 15px;
        }
        
        /* Button transitions */
        .btn-primary {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(212, 175, 55, 0.05));
            transition: all 0.4s;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3), rgba(212, 175, 55, 0.1));
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #777;
        }
        
        .footer a {
            color: #777;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer a:hover {
            color: #999;
        }
        
        .intro-text {
            margin-bottom: 25px;
            line-height: 1.7;
            color: var(--text-primary);
            font-size: 15px;
        }
        
        .intro-text p {
            margin-bottom: 15px;
        }
        
        @media (max-width: 580px) {
            :root {
                --card-width: 100%;
                --card-height: 480px;
            }
            
            body {
                padding: 12px;
            }
            
            .container {
                padding: 20px;
            }
            
            .btn-group {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .card-header .icon {
                font-size: 28px;
                margin-right: 12px;
                margin-left: 8px;
            }
            
            .card-header .title {
                font-size: 20px;
            }
            
            .card-content {
                padding: 20px;
            }
            
            .card-question {
                font-size: 16px;
                margin-bottom: 20px;
            }
            
            .card-importance {
                font-size: 14px;
                padding: 16px;
            }
        }
        
        @media (max-width: 400px) {
            .card-corner {
                top: 15px;
                right: 15px;
                padding: 4px 8px;
                gap: 4px;
            }
            
            .card-suite, .card-number {
                font-size: 18px;
            }
            
            .form-group label {
                font-size: 14px;
            }
            
            .form-group input {
                padding: 12px;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div class="subtitle">Play Your Security Cards Right</div>
    <h1>ShieldScan‚Ñ¢: The Small Business Protection Assessment</h1>
    
    <!-- Intro Screen -->
    <div id="intro-screen" class="container fade-in">
        <div class="intro-text">
            <p>xFacilitator delivers affordable, enterprise-grade security protection for small businesses without the complexity, minimums, or long-term commitments.</p>
            
            <p>ShieldScan‚Ñ¢ helps identify and address hidden vulnerabilities in your digital defenses before they become catastrophic breaches. Just as a beaver meticulously inspects every inch of its dam, our assessment methodically evaluates your security posture through our proprietary Watch Cards‚Ñ¢ system. Don't let cyber threats erode what you've built‚Äîsecure your business today and discover your Protection Score.</p>
        </div>
        
        <h3>How to use:</h3>
        <p>For each security card, select one of the following options:</p>
        <div class="status-grid">
            <div class="category-box">
                <strong class="status-category-strong">STRONG</strong>
                <p style="margin: 5px 0 0;">You have this protection and it works well</p>
            </div>
            <div class="category-box">
                <strong class="status-category-leaking">LEAKING</strong>
                <p style="margin: 5px 0 0;">You have it but it's not fully effective</p>
            </div>
            <div class="category-box">
                <strong class="status-category-missing">MISSING</strong>
                <p style="margin: 5px 0 0;">You don't have this protection</p>
            </div>
            <div class="category-box">
                <strong class="status-category-uncharted">UNCHARTED</strong>
                <p style="margin: 5px 0 0;">You're not familiar with this concept</p>
            </div>
        </div>
        
        <button id="start-btn" class="btn btn-primary" style="width: 100%; margin-top: 30px;">Start Assessment</button>
    </div>
    
    <!-- Assessment Screen -->
    <div id="assessment-screen" class="hidden">
        <div class="container">
            <div class="progress">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            
            <div class="question-counter-container">
                <div id="question-counter">Card 1 of 10</div>
                <div id="score-display">Current Score: 0</div>
            </div>
            
            <div class="watch-card">
                <div class="card-inner">
                    <div class="card-corner">
                        <span id="card-suite" class="card-suite">‚ô†</span>
                        <span id="card-number" class="card-number">A</span>
                    </div>
                    
                    <div class="card-header">
                        <span id="card-icon" class="icon">üé£</span>
                        <span id="card-title" class="title">Email Security</span>
                    </div>
                    
                    <div class="card-content">
                        <div id="card-question" class="card-question">
                            Does your business have protection against phishing beyond basic spam filters?
                        </div>
                        <div id="card-importance" class="card-importance">
                            Why It Matters: 72% of Canadian small businesses experienced cyber attacks in 2024, with phishing emails as the primary entry point.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-strong" data-action="strong">
                    <span>Strong</span>
                    <span class="btn-subtext">We have this and it works well</span>
                </button>
                <button class="btn btn-leaking" data-action="leaking">
                    <span>Leaking</span>
                    <span class="btn-subtext">We have it but it's not effective</span>
                </button>
                <button class="btn btn-missing" data-action="missing">
                    <span>Missing</span>
                    <span class="btn-subtext">We don't have this protection</span>
                </button>
                <button class="btn btn-uncharted" data-action="uncharted">
                    <span>Uncharted</span>
                    <span class="btn-subtext">Not familiar with this concept</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Contact Screen -->
    <div id="contact-screen" class="hidden container">
        <h2>Just One More Step!</h2>
        <p>Enter your information to get your personalized security recommendations.</p>
        
        <div id="contact-form">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" required placeholder="Your name">
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" required placeholder="Your email address">
            </div>
            
            <div class="form-group">
                <label for="company">Company</label>
                <input type="text" id="company" required placeholder="Your company name">
            </div>
            
            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="tel" id="phone" placeholder="Your phone number (optional)">
            </div>
            
            <button id="submit-contact" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Get My Results</button>
        </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="hidden">
        <div class="container">
            <h2>Your Protection Score Results</h2>
            
            <div class="result-section">
                <h3>Your Protection Score: <span id="final-score">0</span>/30</h3>
                <div class="progress">
                    <div id="results-progress-bar" class="progress-bar"></div>
                </div>
                <div id="risk-level" style="text-align: center; margin-top: 18px; font-size: 20px; font-weight: 600;"></div>
            </div>
            
            <div class="result-section">
                <h3>Security Breakdown</h3>
                <div class="status-grid">
                    <div class="status-box status-box-strong">
                        <h4 class="status-category-strong">Strong</h4>
                        <p class="status-count"><span id="strong-count">0</span></p>
                        <p class="status-label">Keep maintaining these protections</p>
                    </div>
                    <div class="status-box status-box-leaking">
                        <h4 class="status-category-leaking">Leaking</h4>
                        <p class="status-count"><span id="leaking-count">0</span></p>
                        <p class="status-label">Need improvement to be effective</p>
                    </div>
                    <div class="status-box status-box-missing">
                        <h4 class="status-category-missing">Missing</h4>
                        <p class="status-count"><span id="missing-count">0</span></p>
                        <p class="status-label">Critical protections you don't have</p>
                    </div>
                    <div class="status-box status-box-uncharted">
                        <h4 class="status-category-uncharted">Uncharted</h4>
                        <p class="status-count"><span id="uncharted-count">0</span></p>
                        <p class="status-label">Security areas to learn about</p>
                    </div>
                </div>
            </div>
            
            <div class="result-section">
                <h3>Recommended Guardians</h3>
                <div id="recommendations-container">
                    <!-- Recommendations will be inserted here -->
                </div>
            </div>
            
            <div class="result-section result-card" style="background: linear-gradient(135deg, rgba(212, 175, 55, 0.15), rgba(20, 20, 30, 0.8)); border-left: 3px solid var(--accent-gold);">
                <h3 style="margin-top: 0; border-bottom: none; color: var(--accent-gold);">Next Steps</h3>
                <p>Review your security assessment results above and see which areas need improvement.</p>
                <p style="margin-top: 15px;">Click the button below to email your results to our team and schedule a free 30-minute discovery call.</p>
                <button id="email-results-btn" class="btn btn-primary" style="width: 100%; margin-top: 20px;">Email These Results</button>
                <button id="schedule-btn" class="btn btn-primary" style="width: 100%; margin-top: 15px;">Schedule Discovery</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <a href="https://xfacilitator.ca" target="_blank">xFacilitator</a>
    </div>
    
    <script>
        // Security watch cards data
        const watchCards = [
            {
                suite: "‚ô†",
                number: "5",
                icon: "üé£",
                title: "Email Security",
                question: "Does your business have protection against phishing beyond basic spam filters?",
                importance: "Why It Matters: 72% of Canadian small businesses experienced cyber attacks in 2024, with phishing emails as the primary entry point. A single successful phishing attack costs the average small business $36,000.",
                guardian: "mPhish"
            },
            {
                suite: "‚ô†",
                number: "4",
                icon: "üîê",
                title: "Multi-Factor Authentication",
                question: "Is MFA enabled for all critical business accounts, including email, cloud services, and financial platforms?",
                importance: "Why It Matters: Only 20% of small businesses have implemented MFA, yet it reduces account compromise risk by over 90%.",
                guardian: "mCloud"
            },
            {
                suite: "‚ô†",
                number: "9",
                icon: "üíæ",
                title: "Data Backup & Recovery",
                question: "Do you have automated, encrypted backups stored away from your main systems?",
                importance: "Why It Matters: 42% of Alberta small businesses don't back up data regularly. Build your ark before the flood, not during it.",
                guardian: "mCyber"
            },
            {
                suite: "‚ô†",
                number: "7",
                icon: "üõ°Ô∏è",
                title: "Endpoint Protection",
                question: "Do your devices have modern security that goes beyond basic antivirus?",
                importance: "Why It Matters: Small Alberta businesses face sophisticated attacks every 11 seconds. Traditional antivirus catches less than 60% of modern threats.",
                guardian: "mCyber"
            },
            {
                suite: "‚ô†",
                number: "8",
                icon: "üîç",
                title: "Security Monitoring",
                question: "Is someone watching your systems 24/7 for suspicious activity?",
                importance: "Why It Matters: The average breach takes 204 days to discover. That's 9 months of someone rifling through your digital drawers. Early detection can reduce breach costs by over 70%.",
                guardian: "mMonitor"
            },
            {
                suite: "‚ô†",
                number: "K",
                icon: "üö®",
                title: "Incident Response Plan",
                question: "Do you have a written plan for when security incidents happen?",
                importance: "Why It Matters: Know where the fire extinguishers are BEFORE something starts burning. Most businesses waste 3 critical hours just figuring out what to do first. Organizations with incident response plans reduce breach costs by an average of 54%.",
                guardian: "mCyber"
            },
            {
                suite: "‚ô£",
                number: "J",
                icon: "üë®‚Äçüíª",
                title: "Security Awareness Training",
                question: "Are your employees being trained continuously on security basics?",
                importance: "Why It Matters: 95% of breaches start with human error. Monthly training reduces security incidents by up to 70%.",
                guardian: "mPhish"
            },
            {
                suite: "‚ô†",
                number: "2",
                icon: "üîë",
                title: "Password Management",
                question: "Does your company and employees use an enterprise password manager?",
                importance: "Why It Matters: 80% of small business breaches involve compromised credentials. The average employee reuses passwords across 13 different services.",
                guardian: "mPassword"
            },
            {
                suite: "‚ô£",
                number: "10",
                icon: "üìù",
                title: "PIPA Compliance",
                question: "Is your business fully compliant with Alberta's Personal Information Protection Act (PIPA) requirements for data handling and breach notification?",
                importance: "Why it matters: Non-compliance with PIPA can result in fines up to $100,000 for organizations, plus legal challenges and reputational damage.",
                guardian: "mCompliance"
            },
            {
                suite: "‚ô†",
                number: "6",
                icon: "üîç",
                title: "Vulnerability Management",
                question: "Do you regularly check for security holes in your systems?",
                importance: "Why It Matters: 60% of breaches involve unpatched vulnerabilities. It's like leaving your door unlocked because installing the new lock seems inconvenient. Software has flaws. Better you find them before criminals do.",
                guardian: "mCompute"
            }
        ];

        // Guardian descriptions for recommendations
        const guardians = {
            "mPhish": {
                name: "Threat Trainer",
                description: "Ongoing security training and phishing simulations for your team",
                icon: "üê†",
                price: "$30/user/month"
            },
            "mCyber": {
                name: "Crisis Controller",
                description: "Core security platform with incident response",
                icon: "ü¶´",
                price: "$50/user/month"
            },
            "mCloud": {
                name: "Cloud Commander",
                description: "Secures your cloud services and implements MFA",
                icon: "ü¶Ö",
                price: "$75/org + $75/human"
            },
            "mPassword": {
                name: "Password Protector",
                description: "Enterprise password management solution",
                icon: "üîë",
                price: "$12/user/month"
            },
            "mMonitor": {
                name: "Night Watcher",
                description: "24/7 security monitoring and alerts",
                icon: "ü¶â",
                price: "$10/asset/month"
            },
            "mCompute": {
                name: "Hardware Hunter",
                description: "Endpoint protection and vulnerability management",
                icon: "üê∫",
                price: "$75/workstation"
            },
            "mCompliance": {
                name: "Regulation Ranger",
                description: "Compliance management and documentation",
                icon: "üê¢",
                price: "$975 + $475/framework"
            }
        };

        // Application state
        let state = {
            currentIndex: 0,
            score: 0,
            results: {
                strong: [],
                leaking: [],
                missing: [],
                uncharted: []
            },
            user: {
                name: "",
                email: "",
                company: "",
                phone: ""
            }
        };

        // DOM Elements - screens
        const introScreen = document.getElementById('intro-screen');
        const assessmentScreen = document.getElementById('assessment-screen');
        const contactScreen = document.getElementById('contact-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        // DOM Elements - assessment
        const questionCounter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('score-display');
        const progressBar = document.getElementById('progress-bar');
        const cardSuite = document.getElementById('card-suite');
        const cardNumber = document.getElementById('card-number');
        const cardIcon = document.getElementById('card-icon');
        const cardTitle = document.getElementById('card-title');
        const cardQuestion = document.getElementById('card-question');
        const cardImportance = document.getElementById('card-importance');
        
        // DOM Elements - results
        const finalScore = document.getElementById('final-score');
        const resultsProgressBar = document.getElementById('results-progress-bar');
        const riskLevel = document.getElementById('risk-level');
        const strongCount = document.getElementById('strong-count');
        const leakingCount = document.getElementById('leaking-count');
        const missingCount = document.getElementById('missing-count');
        const unchartedCount = document.getElementById('uncharted-count');
        const recommendationsContainer = document.getElementById('recommendations-container');
        
        // Initialize
        window.onload = function() {
            console.log("Window loaded - setting up event listeners");
            
            // Set up event listeners
            document.getElementById('start-btn').addEventListener('click', startAssessment);
            document.getElementById('submit-contact').addEventListener('click', handleContactSubmit);
            document.getElementById('email-results-btn').addEventListener('click', emailResults);
            document.getElementById('schedule-btn').addEventListener('click', scheduleConsultation);
            
            // Set up action buttons
            const actionButtons = document.querySelectorAll('[data-action]');
            actionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.getAttribute('data-action');
                    handleCardAction(action);
                });
            });
            
            // Add hover effect to all buttons
            const allButtons = document.querySelectorAll('.btn');
            allButtons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        };

        // Start assessment
        function startAssessment() {
            console.log("Starting assessment");
            introScreen.classList.add('hidden');
            assessmentScreen.classList.remove('hidden');
            loadCard(0);
        }

        // Load card data
        function loadCard(index) {
            console.log("Loading card", index);
            
            if (index >= watchCards.length) {
                // Assessment complete, show contact form
                assessmentScreen.classList.add('hidden');
                contactScreen.classList.remove('hidden');
                return;
            }
            
            const card = watchCards[index];
            
            // Update card content
            cardSuite.textContent = card.suite;
            cardNumber.textContent = card.number;
            cardIcon.textContent = card.icon;
            cardTitle.textContent = card.title;
            cardQuestion.textContent = card.question;
            cardImportance.textContent = card.importance;
            
            // Update progress
            questionCounter.textContent = `Card ${index + 1} of ${watchCards.length}`;
            progressBar.style.width = `${((index) / watchCards.length) * 100}%`;
            
            // Update state
            state.currentIndex = index;
        }

        // Handle card action
        function handleCardAction(action) {
            console.log("Card action:", action);
            
            // Map actions to points
            const points = {
                'strong': 0,
                'leaking': 1,
                'missing': 2,
                'uncharted': 3
            };
            
            // Add card to results
            state.results[action].push(state.currentIndex);
            
            // Update score
            state.score += points[action];
            scoreDisplay.textContent = `Current Score: ${state.score}`;
            
            // Add a subtle animation to the card
            const cardInner = document.querySelector('.card-inner');
            cardInner.style.transform = 'translateX(100%)';
            cardInner.style.opacity = '0';
            
            // Load next card after animation
            setTimeout(() => {
                loadCard(state.currentIndex + 1);
                
                // Reset animation
                setTimeout(() => {
                    cardInner.style.transition = 'none';
                    cardInner.style.transform = 'translateX(-100%)';
                    cardInner.style.opacity = '0';
                    
                    // Force a reflow
                    cardInner.offsetHeight;
                    
                    // Re-enable transition and bring card back
                    cardInner.style.transition = 'transform 0.4s ease, opacity 0.4s ease';
                    cardInner.style.transform = 'translateX(0)';
                    cardInner.style.opacity = '1';
                }, 50);
            }, 400);
        }

        // Handle contact form submission
        function handleContactSubmit(event) {
            console.log("Contact form submitted");
            
            // Get form data
            state.user = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                company: document.getElementById('company').value,
                phone: document.getElementById('phone').value
            };
            
            // Validate form (simple validation)
            if (!state.user.name || !state.user.email || !state.user.company) {
                alert("Please fill in all required fields");
                return;
            }
            
            // Show results screen
            contactScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            // Display results
            displayResults();
        }

        // Email results function
        function emailResults() {
            console.log("Emailing assessment results");
            
            // Format the assessment data for email
            const subject = encodeURIComponent(`ShieldScan Results - ${state.user.company}`);
            
            // Create a detailed body with all assessment information
            let body = encodeURIComponent(`
SHIELDSCAN‚Ñ¢ ASSESSMENT RESULTS

Client Information:
------------------------
Name: ${state.user.name}
Email: ${state.user.email}
Company: ${state.user.company}
Phone: ${state.user.phone || "Not provided"}

Protection Score Summary:
------------------------
Overall Score: ${state.score}/30
Strong Areas: ${state.results.strong.length}
Leaking Areas: ${state.results.leaking.length}
Missing Protections: ${state.results.missing.length}
Uncharted Areas: ${state.results.uncharted.length}

Risk Level: ${getRiskLevelText(state.score)}

Detailed Responses:
------------------------
`);

            // Add detailed responses for each card
            if (state.results.strong.length > 0) {
                body += encodeURIComponent(`STRONG PROTECTIONS:\n`);
                state.results.strong.forEach(index => {
                    body += encodeURIComponent(`‚úì ${watchCards[index].title}\n`);
                });
                body += encodeURIComponent(`\n`);
            }
            
            if (state.results.leaking.length > 0) {
                body += encodeURIComponent(`LEAKING PROTECTIONS:\n`);
                state.results.leaking.forEach(index => {
                    body += encodeURIComponent(`‚ö†Ô∏è ${watchCards[index].title}\n`);
                });
                body += encodeURIComponent(`\n`);
            }
            
            if (state.results.missing.length > 0) {
                body += encodeURIComponent(`MISSING PROTECTIONS:\n`);
                state.results.missing.forEach(index => {
                    body += encodeURIComponent(`‚ùå ${watchCards[index].title}\n`);
                });
                body += encodeURIComponent(`\n`);
            }
            
            if (state.results.uncharted.length > 0) {
                body += encodeURIComponent(`UNCHARTED AREAS:\n`);
                state.results.uncharted.forEach(index => {
                    body += encodeURIComponent(`‚ùì ${watchCards[index].title}\n`);
                });
                body += encodeURIComponent(`\n`);
            }
            
            // Add timestamp and footer
            body += encodeURIComponent(`
Assessment completed: ${new Date().toLocaleString()}

------------------------
ShieldScan‚Ñ¢ by xFacilitator | Solutions for your digital dam
https://xfacilitator.ca
`);
            
            // Open email client with pre-filled email
            window.location.href = `mailto:solutions@xfacilitator.ca?subject=${subject}&body=${body}`;
        }

        // Helper function to get risk level text
        function getRiskLevelText(score) {
            if (score <= 5) {
                return "SAFE - Your security posture is strong";
            } else if (score <= 12) {
                return "CAUTION - Your security needs improvement";
            } else if (score <= 19) {
                return "DANGER - Significant vulnerabilities exist";
            } else {
                return "CRITICAL - Your business is at extreme risk";
            }
        }

        // Display results
        function displayResults() {
            console.log("Displaying results");
            
            // Update score
            finalScore.textContent = state.score;
            
            // Set risk level
            let riskLevelText, riskColor, progressPercent;
            
            if (state.score <= 5) {
                riskLevelText = "SAFE - Your security posture is strong";
                riskColor = "#2c6e49";
                progressPercent = "80%";
            } else if (state.score <= 12) {
                riskLevelText = "CAUTION - Your security needs improvement";
                riskColor = "#be6a15";
                progressPercent = "60%";
            } else if (state.score <= 19) {
                riskLevelText = "DANGER - Significant vulnerabilities exist";
                riskColor = "#9e2a2b";
                progressPercent = "40%";
            } else {
                riskLevelText = "CRITICAL - Your business is at extreme risk";
                riskColor = "#9e2a2b";
                progressPercent = "20%";
            }
            
            riskLevel.textContent = riskLevelText;
            riskLevel.style.color = riskColor;
            resultsProgressBar.style.width = progressPercent;
            
            // Update counts with animation
            animateCount('strong-count', state.results.strong.length);
            animateCount('leaking-count', state.results.leaking.length);
            animateCount('missing-count', state.results.missing.length);
            animateCount('uncharted-count', state.results.uncharted.length);
            
            // Generate recommendations
            generateRecommendations();
        }
        
        // Animate count up for a more engaging display
        function animateCount(elementId, targetValue) {
            const element = document.getElementById(elementId);
            let currentValue = 0;
            const duration = 1000; // ms
            const interval = 50; // ms
            const steps = duration / interval;
            const increment = targetValue / steps;
            
            const timer = setInterval(() => {
                currentValue += increment;
                element.textContent = Math.floor(currentValue);
                
                if (currentValue >= targetValue) {
                    element.textContent = targetValue;
                    clearInterval(timer);
                }
            }, interval);
        }

        // Generate recommendations
        function generateRecommendations() {
            recommendationsContainer.innerHTML = '';
            
            // Focus on Missing and Uncharted items first (highest risk), then Leaking
            const priorityIssues = [...state.results.missing, ...state.results.uncharted, ...state.results.leaking];
            
            if (priorityIssues.length === 0) {
                // No issues found (all Strong)
                const message = document.createElement('div');
                message.className = 'result-card';
                message.style.backgroundColor = 'rgba(44, 110, 73, 0.15)';
                message.style.borderLeft = '3px solid var(--strong-color)';
                message.innerHTML = `
                    <h4 style="color: var(--strong-color); margin-top: 0;">Excellent Protection!</h4>
                    <p>Your security posture is strong across all areas. Schedule a discovery call to discuss how to maintain your excellent security stance.</p>
                `;
                recommendationsContainer.appendChild(message);
                return;
            }
            
            // Add tip message for high priority items
            if (state.results.missing.length > 0 || state.results.uncharted.length > 0) {
                const tipMessage = document.createElement('div');
                tipMessage.className = 'result-card';
                tipMessage.style.background = 'linear-gradient(135deg, rgba(212, 175, 55, 0.15), rgba(20, 20, 30, 0.8))';
                tipMessage.style.borderLeft = '3px solid var(--accent-gold)';
                tipMessage.innerHTML = `
                    <h4 style="color: var(--accent-gold); margin-top: 0;">TIP</h4>
                    <p>Start by fixing the cards in MISSING and UNCHARTED quadrants since they carry the most risk points!</p>
                `;
                recommendationsContainer.appendChild(tipMessage);
            }
            
            // Direct 1:1 mapping of security issues to guardian solutions based on the mapping provided
            const directMappings = {
                "Email Security": {
                    guardian: "mPhish",
                    name: "Threat Trainer",
                },
                "Multi-Factor Authentication": {
                    guardian: "mCloud",
                    name: "Cloud Commander",
                },
                "Password Management": {
                    guardian: "mPassword",
                    name: "Password Protector",
                },
                "Data Backup & Recovery": {
                    guardian: "mCyber",
                    name: "Crisis Controller",
                    alternates: ["mCloud", "mCompute"]
                },
                "Vulnerability Management": {
                    guardian: "mCompute",
                    name: "Hardware Hunter",
                },
                "Security Monitoring": {
                    guardian: "mMonitor",
                    name: "Night Watcher",
                },
                "Incident Response Plan": {
                    guardian: "mCyber",
                    name: "Crisis Controller",
                },
                "Security Awareness Training": {
                    guardian: "mPhish",
                    name: "Threat Trainer",
                },
                "PIPA Compliance": {
                    guardian: "mCompliance",
                    name: "Regulation Ranger",
                },
                "Endpoint Protection": {
                    guardian: "mCyber",
                    name: "Crisis Controller",
                }
            };
            
            // Process each issue and create recommendation cards
            const processedCards = new Set(); // Track processed cards to avoid duplicates
            
            priorityIssues.forEach(index => {
                const card = watchCards[index];
                const cardTitle = card.title;
                const mapping = directMappings[cardTitle];
                
                if (!mapping || processedCards.has(cardTitle)) {
                    return; // Skip if no mapping or already processed
                }
                
                processedCards.add(cardTitle);
                const guardian = guardians[mapping.guardian];
                
                // Determine category of the issue
                let categoryName, categoryColor, categoryBg;
                if (state.results.missing.includes(index)) {
                    categoryName = "MISSING";
                    categoryColor = "var(--missing-color)";
                    categoryBg = "rgba(158, 42, 43, 0.15)";
                } else if (state.results.uncharted.includes(index)) {
                    categoryName = "UNCHARTED";
                    categoryColor = "var(--uncharted-color)";
                    categoryBg = "rgba(94, 84, 142, 0.15)";
                } else {
                    categoryName = "LEAKING";
                    categoryColor = "var(--leaking-color)";
                    categoryBg = "rgba(190, 106, 21, 0.15)";
                }
                
                // Create recommendation card
                const recommendationCard = document.createElement('div');
                recommendationCard.className = 'result-card';
                recommendationCard.style.animation = 'fadeIn 0.5s ease-in-out';
                
                // Guardian header
                const guardianHeader = document.createElement('div');
                guardianHeader.className = 'guardian-header';
                guardianHeader.innerHTML = `
                    <div class="guardian-icon">${guardian.icon}</div>
                    <div class="guardian-info">
                        <h4>${guardian.name}</h4>
                        <div class="guardian-price">${guardian.price}</div>
                    </div>
                `;
                
                // Issue information
                const issueInfo = document.createElement('div');
                issueInfo.innerHTML = `
                    <p style="margin-top: 10px; margin-bottom: 5px;">
                        <span style="display: inline-block; background-color: ${categoryBg}; color: ${categoryColor}; padding: 4px 10px; border-radius: 20px; font-size: 13px; margin-right: 8px; border: 1px solid ${categoryColor};">${categoryName}</span>
                        <strong>${cardTitle}</strong>
                    </p>
                    <p style="margin-top: 10px;">${guardian.description}</p>
                `;
                
                // Add alternate guardians if applicable
                if (mapping.alternates && mapping.alternates.length > 0) {
                    const alternatesContainer = document.createElement('div');
                    alternatesContainer.style.marginTop = "15px";
                    alternatesContainer.style.fontSize = "14px";
                    alternatesContainer.style.color = "var(--text-secondary)";
                    alternatesContainer.style.padding = "12px";
                    alternatesContainer.style.borderRadius = "8px";
                    alternatesContainer.style.backgroundColor = "rgba(30, 30, 38, 0.4)";
                    
                    alternatesContainer.innerHTML = `
                        <p><em>Alternative options:</em></p>
                    `;
                    
                    const alternatesList = document.createElement('div');
                    alternatesList.style.marginTop = "8px";
                    
                    mapping.alternates.forEach(altGuardianKey => {
                        const altGuardian = guardians[altGuardianKey];
                        const altItem = document.createElement('div');
                        altItem.style.marginBottom = "8px";
                        altItem.style.display = "flex";
                        altItem.style.alignItems = "center";
                        altItem.innerHTML = `
                            <span style="display: inline-block; width: 30px; text-align: center; margin-right: 8px;">${altGuardian.icon}</span>
                            <span><strong>${altGuardian.name}</strong> - ${altGuardian.price}</span>
                        `;
                        alternatesList.appendChild(altItem);
                    });
                    
                    alternatesContainer.appendChild(alternatesList);
                    issueInfo.appendChild(alternatesContainer);
                }
                
                // Assemble card
                recommendationCard.appendChild(guardianHeader);
                recommendationCard.appendChild(issueInfo);
                recommendationsContainer.appendChild(recommendationCard);
            });
        }

        // Schedule consultation
        function scheduleConsultation(event) {
            event.preventDefault();
            window.open("https://cal.com/xfacilitator/illuminate?overlayCalendar=true", "_blank");
        }
    </script>
</body>
</html>
